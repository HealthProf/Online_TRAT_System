# TRAT System Setup Guide

Follow these step-by-step instructions to set up your Digital TRAT System.

## ‚è±Ô∏è Estimated Time: .5-1 hour

## üìã Prerequisites

- Google account (free)
- Web browser (Chrome, Firefox, Safari, or Edge)
- Basic familiarity with Google Sheets

## üöÄ Setup Process

### Step 1: Create Google Sheets Structure (30 minutes)

#### 1.1 Create New Spreadsheet
1. Go to [sheets.google.com](https://sheets.google.com)
2. Click "Blank" to create a new spreadsheet
3. Click "Untitled spreadsheet" at the top
4. Rename to "TRAT Master System"

#### 1.2 Set Up TRAT Library Sheet
1. Right-click on "Sheet1" tab at bottom
2. Select "Rename" and change to "TRAT_Library"
3. In row 1, add these exact headers:

| A | B | C | D | E | F | G | H |
|---|---|---|---|---|---|---|---|
| TRAT_ID | Question_Number | Question_Text | Option_A | Option_B | Option_C | Option_D | Correct_Answer |

4. Select row 1 and format:
   - Make bold (Ctrl+B or Cmd+B)
   - Add light gray background (Format ‚Üí Fill color)

#### 1.3 Set Up Results Sheet
1. Click "+" button next to sheet tabs
2. Right-click new "Sheet2" and rename to "Results"
3. In row 1, add these headers:

| A | B | C | D | E | F | G | ... | V |
|---|---|---|---|---|---|---|-----|---|
| Timestamp | Student_Name | TRAT_ID | Total_Points | Q1_Points | Q2_Points | Q3_Points | ... | Q18_Points |

4. Format row 1 (bold, light gray background)

#### 1.4 Add Sample Data (for testing)
In the TRAT_Library sheet, add these test questions starting in row 2:

| TRAT_ID | Question_Number | Question_Text | Option_A | Option_B | Option_C | Option_D | Correct_Answer |
|---------|----------------|---------------|----------|----------|----------|----------|----------------|
| test1 | 1 | What is 2 + 2? | 3 | 4 | 5 | 6 | B |
| test1 | 2 | Which planet is closest to the sun? | Earth | Mars | Mercury | Venus | C |
| test1 | 3 | What color do you get when mixing red and blue? | Green | Purple | Orange | Yellow | B |

#### 1.5 Configure Sharing
1. Click "Share" button (top right)
2. Click "Restricted" and change to "Anyone with the link"
3. Ensure permission is set to "Editor" (not Viewer)
4. Click "Copy link" - save this for later

#### 1.6 Get Spreadsheet ID
1. Look at your browser URL - it should be:
   `https://docs.google.com/spreadsheets/d/LONG_ID_HERE/edit#gid=0`
2. Copy the long string between `/d/` and `/edit`
3. This is your Spreadsheet ID - save it for Step 2

**‚úÖ Checkpoint**: You should have a spreadsheet with two sheets, sample data, and proper sharing settings.

### Step 2: Set Up Google Apps Script (45 minutes)

#### 2.1 Access Apps Script
1. In your spreadsheet, go to Extensions ‚Üí Apps Script
2. A new tab will open with the Apps Script editor
3. Delete the existing code in the editor

#### 2.2 Add Backend Code
1. Copy the entire contents of [`backend.js`](backend.js) from this repository
2. Paste it into the Apps Script editor
3. Find line 4: `const SPREADSHEET_ID = 'YOUR_SPREADSHEET_ID';`
4. Replace `YOUR_SPREADSHEET_ID` with your actual Spreadsheet ID (keep the quotes)
5. Save the project (Ctrl+S or Cmd+S)

#### 2.3 Add Frontend Code
1. In Apps Script, click the "+" next to "Files"
2. Select "HTML"
3. Name the file "index" (exactly this name)
4. Delete existing content in the HTML file
5. Copy the entire contents of [`index.html`](index.html) from this repository
6. Paste it into the HTML file
7. Save the project

#### 2.4 Name Your Project
1. Click "Untitled project" at the top
2. Rename to "TRAT System"

#### 2.5 Test Connection
1. In the function dropdown, select `testConnection`
2. Click the "Run" button (triangle icon)
3. **First time only**: You'll need to authorize:
   - Click "Review Permissions"
   - Choose your Google account
   - Click "Advanced" ‚Üí "Go to TRAT System (unsafe)"
   - Click "Allow"
4. Check execution log: View ‚Üí Logs
5. Should show "Connection successful" message

#### 2.6 Deploy Web App
1. Click "Deploy" (top right) ‚Üí "New deployment"
2. Click the settings gear ‚öôÔ∏è next to "Type"
3. Select "Web app"
4. Settings:
   - Description: "TRAT System v1"
   - Execute as: "Me"
   - Who has access: "Anyone"
5. Click "Deploy"
6. **Important**: Copy the Web App URL - you'll need this!
7. Click "Done"

**‚úÖ Checkpoint**: Your web app should be deployed and you should have a working URL.

### Step 3: Test Your System (30 minutes)

#### 3.1 Initial Test
1. Open your Web App URL in a new browser tab
2. Enter test information:
   - Name: "Test Student"
   - TRAT Code: "test1"
3. Click "Start TRAT"

#### 3.2 Complete Test Quiz
1. Answer the 3 sample questions
2. Try getting some wrong to test the 4‚Üí2‚Üí1‚Üí0 scoring
3. Complete the entire quiz
4. Note your final score

#### 3.3 Verify Results
1. Go back to your spreadsheet
2. Click on "Results" tab
3. You should see a new row with:
   - Timestamp
   - Student name ("Test Student")
   - TRAT ID ("test1")
   - Total points
   - Individual question scores

#### 3.4 Test Different Access Methods
**Method 1 - Generic URL** (students enter TRAT code):
```
https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec
```

**Method 2 - Direct URL** (TRAT code embedded):
```
https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?trat=test1
```

Both should work with your test data.

**‚úÖ Checkpoint**: You should be able to complete a full TRAT and see results in your spreadsheet.

### Step 4: Create Your First Real TRAT (30 minutes)

#### 4.1 Plan Your Questions
- Decide on a TRAT_ID (e.g., "midterm1", "chapter3quiz")
- Prepare your questions and 4 answer choices each
- Identify the correct answer for each question

#### 4.2 Add Questions to Spreadsheet
1. Go to your TRAT_Library sheet
2. Add new rows with your questions
3. Use your chosen TRAT_ID for all questions
4. Number questions sequentially (1, 2, 3, etc.)
5. Set correct answers as A, B, C, or D

#### 4.3 Test Your TRAT
1. Use your web app URL
2. Enter a test name and your new TRAT_ID
3. Complete the quiz to verify everything works
4. Check that results save properly

**‚úÖ Checkpoint**: You now have a working TRAT with your own questions.

### Step 5: Share with Students (15 minutes)

#### 5.1 Prepare URLs for Students
Choose your sharing method:

**Option A - Generic URL** (students type TRAT code):
- Share: `https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec`
- Tell students the TRAT code separately

**Option B - Direct URL** (embedded TRAT code):
- Share: `https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec?trat=YOUR_TRAT_ID`
- Students don't need to enter TRAT code

#### 5.2 Instructions for Students
"Complete the TRAT by:
1. Click the provided link
2. Enter your full name
3. [If using Option A] Enter the TRAT code: [YOUR_CODE]
4. Answer questions - you can try multiple times per question
5. Your results will be automatically saved"

**‚úÖ Checkpoint**: Students can access and complete your TRAT successfully.

## üéØ You're Done!

Your Digital TRAT System is now ready for production use.

## üìã Quick Reference

### Adding New TRATs
1. Add questions to TRAT_Library sheet with new TRAT_ID
2. Share URL with students: `...exec?trat=NEW_TRAT_ID`

### Managing Results
- View real-time results in Results sheet
- Filter by TRAT_ID to see specific quiz results
- Export data for Canvas import

### URLs for Students
- **Generic**: `https://script.google.com/macros/s/DEPLOYMENT_ID/exec`
- **Direct**: `https://script.google.com/macros/s/DEPLOYMENT_ID/exec?trat=TRAT_ID`

## üÜò Need Help?

- Check the [Troubleshooting Guide](troubleshooting.md)
- Review error messages in browser console
- Test with sample data first
- Verify all setup steps were completed exactly

## üîÑ Next Steps

Once your system is working:
1. **Create additional TRATs** by adding questions with new TRAT_IDs
2. **Customize styling** in the HTML file to match your institution
3. **Set up regular backups** of your spreadsheet
4. **Train colleagues** on adding new questions

**Congratulations! You've successfully built a Digital TRAT System! üéâ**
